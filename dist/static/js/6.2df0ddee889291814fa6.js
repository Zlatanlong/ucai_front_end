webpackJsonp([6],{7703:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("olkN"),n={name:"edit",data:function(){return{user:{},yearList:[],rules:{phonenum:[{type:"number",message:"请输入正确的手机号",trigger:"blur"}],qq:[{type:"number",message:"请输入正确的qq",trigger:"blur"}]}}},methods:{getYearList:function(){for(var e=2018;e>1990;e--)this.yearList.push(e)},handleSubmit:function(e){var r=this;this.$refs[e].validate(function(e){e?r.$http.put("/user/change/userinfo/"+r.user.id,{phonenum:r.user.phonenum,qq:r.user.qq,enrollmentYear:r.user.enrollmentYear}).then(function(e){0===e.data.code?(r.$Message.success("提交成功！"),s.a.setIfLoginAction(r.user),r.$router.push("/user/"+r.user.id+"/info")):r.$Message.error("提交失败,未知错误")},function(e){console.log(e),r.$Message.error("提交失败,服务器错误")}):r.$Message.error("提交失败!")})}},created:function(){s.a.state.ifLogin?(this.user=s.a.state.user,this.getYearList()):this.$router.push("/login")}},u={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[t("Col",{attrs:{xs:22,sm:10,md:10,lg:10}},[t("h2",[e._v("编辑个人资料")]),t("h1",[e._v(e._s(e.user.name))]),t("Tooltip",{attrs:{content:"邮箱暂时不支持更改"}},[e._v("邮箱 "+e._s(e.user.email))]),t("Form",{ref:"userform",attrs:{model:e.user,rules:e.rules}},[t("FormItem",{attrs:{label:"联系电话",prop:"phonenum"}},[t("Input",{attrs:{placeholder:"请输入您的联系方式",number:"number"},model:{value:e.user.phonenum,callback:function(r){e.$set(e.user,"phonenum",r)},expression:"user.phonenum"}})],1),t("FormItem",{attrs:{label:"联系QQ",prop:"qq"}},[t("Input",{attrs:{placeholder:"请输入您的QQ",number:"number"},model:{value:e.user.qq,callback:function(r){e.$set(e.user,"qq",r)},expression:"user.qq"}})],1),t("FormItem",{attrs:{label:"入学年份",prop:"enrollmentYear"}},[t("Select",{attrs:{placeholder:"选择入学年份"},model:{value:e.user.enrollmentYear,callback:function(r){e.$set(e.user,"enrollmentYear",r)},expression:"user.enrollmentYear"}},e._l(e.yearList,function(r,s){return t("Option",{key:s,attrs:{value:r}},[e._v(e._s(r))])}))],1),t("FormItem",[t("Button",{on:{click:function(r){e.handleSubmit("userform")}}},[e._v("保存")]),t("Button",{staticStyle:{"margin-left":"20px"},on:{click:function(r){e.$router.push("/user/"+e.user.id+"/info")}}},[e._v("返回个人信息")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=t("VU/8")(n,u,!1,function(e){t("su/u")},"data-v-c7fa7ae8",null);r.default=o.exports},"su/u":function(e,r){}});
//# sourceMappingURL=6.2df0ddee889291814fa6.js.map