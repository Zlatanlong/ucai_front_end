webpackJsonp([5],{"07Fj":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("olkN"),c={name:"notice",data:function(){var e=this;return{columnNotSeen:[{type:"selection",width:60,align:"center"},{title:"用户",key:"fromUserName"},{title:"类型",width:60,align:"center",key:"typeName"},{title:"我的评论",key:"toReply"},{title:"时间",key:"time"}],columnSeen:[{title:"用户",key:"fromUserName"},{title:"类型",width:60,align:"center",key:"typeName"},{title:"我的评论",key:"toReply"},{title:"时间",key:"time"}],notices:{notSeen:[],seen:[]},selection:[],label:function(t){return t("div",[t("span","未读通知"),t("Badge",{props:{count:null===e.notices.notSeen?0:e.notices.notSeen.length}})])}}},methods:{getNoteces:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$http.get("/user/notices/notseen").then(function(t){0===t.data.code?(e.notices.notSeen=t.data.data,e.handleTransNotice()):207===t.data.code&&(e.notices.notSeen=[]),e.$http.get("/user/notices/seen").then(function(t){0===t.data.code?(e.notices.seen=t.data.data,e.handleTransNotice()):e.notices.seen=[],o.a.setNoticesCount(e.notices.notSeen.length)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},handleTransNotice:function(){null!==this.notices.notSeen&&this.notices.notSeen.forEach(function(e){0===e.type?e.typeName="点赞":1===e.type&&(e.typeName="回复")}),null!==this.notices.seen&&this.notices.seen.forEach(function(e){0===e.type?e.typeName="点赞":1===e.type&&(e.typeName="回复")})},handleSelectAll:function(e){this.$refs.selection.selectAll(e)},changeSelection:function(e){this.selection=e},handleSee:function(){var e=this;this.$http.put("/user/notices",this.selection).then(function(t){0===t.data.code&&(e.$Message.success("操作成功！"),e.getNoteces(!0))}).catch(function(e){console.log(e)})}},created:function(){this.getNoteces()}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Tabs",[n("TabPane",{attrs:{label:e.label}},[n("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"23"}},[n("Button",{staticClass:"but",on:{click:function(t){e.handleSelectAll(!0)}}},[e._v("全选")]),n("Button",{staticClass:"but",on:{click:function(t){e.handleSelectAll(!1)}}},[e._v("取消全选")]),n("Button",{staticClass:"but",on:{click:e.handleSee}},[e._v("设为已读")]),n("Table",{ref:"selection",attrs:{columns:e.columnNotSeen,data:e.notices.notSeen,"show-header":!1},on:{"on-selection-change":e.changeSelection}})],1)],1)],1),n("TabPane",{attrs:{label:"已读通知"}},[n("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"23"}},[n("Table",{attrs:{columns:e.columnSeen,data:e.notices.seen,"show-header":!1}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var a=n("VU/8")(c,s,!1,function(e){n("rz0C")},"data-v-dbc5fc12",null);t.default=a.exports},rz0C:function(e,t){}});
//# sourceMappingURL=5.d03a053a93f87deffda8.js.map