{"version":3,"sources":["webpack:///src/pages/manager-dish/add-dish.vue","webpack:///./src/pages/manager-dish/add-dish.vue?9e66","webpack:///./src/pages/manager-dish/add-dish.vue"],"names":["add_dish","name","data","form","price","file","description","restaurantId","restaurantName","rules","required","message","trigger","type","restaurantList","methods","handleUpload","this","handleSubmit","_this","$refs","validate","valid","$Message","error","formData","FormData","append","getRestaurantName","$Spin","show","$http","post","headers","Content-Type","then","res","hide","code","$Modal","success","title","content","onOk","$router","push","onCancel","err","console","log","handleReset","resetFields","id","i","length","created","_this2","get","manager_dish_add_dish","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","justify","xs","sm","md","lg","_v","ref","model","label-position","label","prop","placeholder","value","callback","$$v","$set","expression","filterable","_l","item","index","key","_s","number","autosize","minRows","maxRows","before-upload","action","format","max-size","icon","_e","on","click","$event","staticStyle","float","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.c020dc7154299394b9f2.js","sourcesContent":["<template lang=\"pug\">\nRow(type=\"flex\" justify=\"center\" class=\"code-row-bg\")\n  Col(:xs=\"22\" :sm=\"18\" :md=\"14\" :lg=\"10\")\n    h4.title 添加菜品\n    Form(ref=\"form\" :model=\"form\" :rules=\"rules\" label-position=\"top\")\n      FormItem(label=\"菜名\" prop=\"name\")\n        Input(v-model=\"form.name\" placeholder=\"请输入菜名\")\n      FormItem(label=\"餐厅\" prop=\"restaurantId\")\n        Select(v-model=\"form.restaurantId\" filterable)\n          Option(v-for=\"(item, index) in restaurantList\" :key=\"index\" :value=\"item.id\") {{item.name}}\n      FormItem(label=\"价格\" prop=\"price\")\n        Input(v-model=\"form.price\" placeholder=\"请输入价格\" number)\n      FormItem(label=\"描述\" prop=\"description\")\n        Input(v-model=\"form.description\" placeholder=\"请输入描述，让大家更快了解菜品\" type=\"textarea\" :autosize=\"{minRows: 3,maxRows: 3}\")\n      FormItem(label=\"上传图片（必传）\")\n        Upload(:before-upload=\"handleUpload\" action=\"\" :format=\"['jpg','jpeg','png']\"\n        :max-size=\"2048\")\n          Button(icon=\"ios-cloud-upload-outline\") 上传图片\n          div(v-if=\"this.form.file !== null\") 已选择文件：{{this.form.file.name}}，点击重新选择\n      FormItem\n        Button(type=\"primary\" @click=\"handleSubmit('form')\") 提交\n        Button(@click=\"handleReset('form')\" style=\"float:right\") 重填\n</template>\n\n<script>\nexport default {\n  name: 'add-dish',\n  data () {\n    return {\n      form: {\n        name: '',\n        price: null,\n        file: null,\n        description: '',\n        restaurantId: null,\n        restaurantName: ''\n      },\n      rules: {\n        name: [\n          {required: true, message: '名字不能为空', trigger: 'blur'}\n        ],\n        restaurantId: [\n          {required: true, type: 'number', message: '请选择餐厅', trigger: 'blur'}\n        ],\n        price: [\n          {required: true, type: 'number', message: '请输入正确的价格'}\n        ]\n      },\n      restaurantList: []\n    }\n  },\n  methods: {\n    handleUpload (file) {\n      this.form.file = file\n      return false\n    },\n    handleSubmit (name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          if (this.form.file === null) {\n            this.$Message.error('请上传图片！')\n            return\n          }\n          let formData = new FormData()\n          formData.append('file', this.form.file)\n          formData.append('name', this.form.name)\n          formData.append('price', this.form.price)\n          formData.append('description', this.form.description)\n          formData.append('restaurantId', this.form.restaurantId)\n          formData.append('restaurantName', this.getRestaurantName(this.form.restaurantId))\n          let config = {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          }\n          this.$Spin.show()\n          this.$http.post('/dish-manager/add', formData, config).then(res => {\n            this.$Spin.hide()\n            if (res.data.code === 0) {\n              this.$Modal.success({\n                title: '添加成功',\n                content: '是否继续添加？',\n                onOk: () => {\n                  this.$router.push('/manager-dish/add')\n                },\n                onCancel: () => {\n                  this.$router.push('/manager-dish')\n                }\n              })\n            } else if (res.data.code === 3) {\n              this.$Message.error('请登录菜管!')\n              this.$router.push('/manager-dish/adminLogin')\n            } else {\n              this.$Message.error('提交失败！')\n            }\n          }, err => {\n            this.$Spin.hide()\n            this.$Message.error('提交失败！')\n            console.log(err)\n          })\n        } else {\n          this.$Message.error('提交失败！')\n        }\n      })\n    },\n    handleReset (name) {\n      this.$refs[name].resetFields()\n    },\n    getRestaurantName (id) {\n      for (let i = 0; i < this.restaurantList.length; i++) {\n        if (this.restaurantList[i].id === id) {\n          return this.restaurantList[i].name\n        }\n      }\n    }\n  },\n  created () {\n    this.$http.get('/restaurant/get/all').then(res => {\n      this.restaurantList = res.data.data\n    }, err => {\n      console.log(err)\n    })\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n  .title{\n    margin 20px auto\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/manager-dish/add-dish.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Row',{staticClass:\"code-row-bg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('Col',{attrs:{\"xs\":22,\"sm\":18,\"md\":14,\"lg\":10}},[_c('h4',{staticClass:\"title\"},[_vm._v(\"添加菜品\")]),_c('Form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('FormItem',{attrs:{\"label\":\"菜名\",\"prop\":\"name\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入菜名\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('FormItem',{attrs:{\"label\":\"餐厅\",\"prop\":\"restaurantId\"}},[_c('Select',{attrs:{\"filterable\":\"filterable\"},model:{value:(_vm.form.restaurantId),callback:function ($$v) {_vm.$set(_vm.form, \"restaurantId\", $$v)},expression:\"form.restaurantId\"}},_vm._l((_vm.restaurantList),function(item,index){return _c('Option',{key:index,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}))],1),_c('FormItem',{attrs:{\"label\":\"价格\",\"prop\":\"price\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入价格\",\"number\":\"number\"},model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", $$v)},expression:\"form.price\"}})],1),_c('FormItem',{attrs:{\"label\":\"描述\",\"prop\":\"description\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入描述，让大家更快了解菜品\",\"type\":\"textarea\",\"autosize\":{minRows: 3,maxRows: 3}},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1),_c('FormItem',{attrs:{\"label\":\"上传图片（必传）\"}},[_c('Upload',{attrs:{\"before-upload\":_vm.handleUpload,\"action\":\"\",\"format\":['jpg','jpeg','png'],\"max-size\":2048}},[_c('Button',{attrs:{\"icon\":\"ios-cloud-upload-outline\"}},[_vm._v(\"上传图片\")]),(this.form.file !== null)?_c('div',[_vm._v(\"已选择文件：\"+_vm._s(this.form.file.name)+\"，点击重新选择\")]):_vm._e()],1)],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('form')}}},[_vm._v(\"提交\")]),_c('Button',{staticStyle:{\"float\":\"right\"},on:{\"click\":function($event){_vm.handleReset('form')}}},[_vm._v(\"重填\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7ebb725c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/manager-dish/add-dish.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7ebb725c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add-dish.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add-dish.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add-dish.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7ebb725c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add-dish.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7ebb725c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/manager-dish/add-dish.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}