{"version":3,"sources":["webpack:///src/pages/user/notice.vue","webpack:///./src/pages/user/notice.vue?185b","webpack:///./src/pages/user/notice.vue"],"names":["notice","name","data","_this","this","columnNotSeen","type","width","align","title","key","columnSeen","notices","notSeen","seen","selection","label","h","props","count","length","methods","getNoteces","_this2","arguments","undefined","$http","get","then","res","code","handleTransNotice","store","setNoticesCount","catch","err","console","log","forEach","typeName","handleSelectAll","status","$refs","selectAll","changeSelection","handleSee","_this3","put","$Message","success","created","user_notice","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","justify","span","on","click","$event","_v","ref","columns","show-header","on-selection-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.d03a053a93f87deffda8.js","sourcesContent":["<template lang=\"pug\">\n  div\n    Tabs()\n      TabPane(:label=\"label\")\n        Row(type=\"flex\" justify=\"center\" class=\"code-row-bg\")\n          Col(span=\"23\")\n            Button.but(@click=\"handleSelectAll(true)\") 全选\n            Button.but(@click=\"handleSelectAll(false)\") 取消全选\n            Button.but(@click=\"handleSee\") 设为已读\n            Table(:columns=\"columnNotSeen\"\n                  :data=\"notices.notSeen\"\n                  :show-header=\"false\"\n                  ref=\"selection\"\n                  @on-selection-change=\"changeSelection\")\n      TabPane(label=\"已读通知\")\n        Row(type=\"flex\" justify=\"center\" class=\"code-row-bg\")\n          Col(span=\"23\")\n            Table(:columns=\"columnSeen\" :data=\"notices.seen\"\n                  :show-header=\"false\")\n</template>\n\n<script>\nimport Store from '@/store.js'\nexport default {\n  name: 'notice',\n  data () {\n    return {\n      columnNotSeen: [\n        {\n          type: 'selection',\n          width: 60,\n          align: 'center'\n        },\n        {\n          title: '用户',\n          key: 'fromUserName'\n        },\n        {\n          title: '类型',\n          width: 60,\n          align: 'center',\n          key: 'typeName'\n        },\n        {\n          title: '我的评论',\n          key: 'toReply'\n        },\n        {\n          title: '时间',\n          key: 'time'\n        }\n      ],\n      columnSeen: [\n        {\n          title: '用户',\n          key: 'fromUserName'\n        },\n        {\n          title: '类型',\n          width: 60,\n          align: 'center',\n          key: 'typeName'\n        },\n        {\n          title: '我的评论',\n          key: 'toReply'\n        },\n        {\n          title: '时间',\n          key: 'time'\n        }\n      ],\n      notices: {\n        notSeen: [],\n        seen: []\n      },\n      selection: [],\n      label: (h) => {\n        return h('div', [\n          h('span', '未读通知'),\n          h('Badge', {\n            props: {\n              count: this.notices.notSeen === null ? 0 : this.notices.notSeen.length\n            }\n          })\n        ])\n      }\n    }\n  },\n  methods: {\n    getNoteces (ifRefresh = false) {\n      this.$http.get('/user/notices/notseen').then(\n        res => {\n          if (res.data.code === 0) {\n            this.notices.notSeen = res.data.data\n            this.handleTransNotice()\n          } else if (res.data.code === 207) {\n            this.notices.notSeen = []\n          }\n          this.$http.get('/user/notices/seen').then(\n            res => {\n              if (res.data.code === 0) {\n                this.notices.seen = res.data.data\n                this.handleTransNotice()\n              } else {\n                this.notices.seen = []\n              }\n              Store.setNoticesCount(this.notices.notSeen.length)\n              if (ifRefresh) {\n                // this.$router.go(0)\n              }\n            }\n          ).catch(err => { console.log(err) })\n        }\n      ).catch(err => { console.log(err) })\n    },\n    handleTransNotice () {\n      if (this.notices.notSeen !== null) {\n        this.notices.notSeen.forEach(notice => {\n          if (notice.type === 0) {\n            notice.typeName = '点赞'\n          } else if (notice.type === 1) {\n            notice.typeName = '回复'\n          }\n        })\n      }\n      if (this.notices.seen !== null) {\n        this.notices.seen.forEach(notice => {\n          if (notice.type === 0) {\n            notice.typeName = '点赞'\n          } else if (notice.type === 1) {\n            notice.typeName = '回复'\n          }\n        })\n      }\n    },\n    handleSelectAll (status) {\n      this.$refs.selection.selectAll(status)\n    },\n    changeSelection (selection) {\n      this.selection = selection\n    },\n    handleSee () {\n      this.$http.put('/user/notices', this.selection).then(\n        res => {\n          if (res.data.code === 0) {\n            this.$Message.success('操作成功！')\n            this.getNoteces(true)\n          }\n        }\n      ).catch(err => { console.log(err) })\n    }\n  },\n  created () {\n    this.getNoteces()\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.but\n  margin 4px\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user/notice.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Tabs',[_c('TabPane',{attrs:{\"label\":_vm.label}},[_c('Row',{staticClass:\"code-row-bg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('Col',{attrs:{\"span\":\"23\"}},[_c('Button',{staticClass:\"but\",on:{\"click\":function($event){_vm.handleSelectAll(true)}}},[_vm._v(\"全选\")]),_c('Button',{staticClass:\"but\",on:{\"click\":function($event){_vm.handleSelectAll(false)}}},[_vm._v(\"取消全选\")]),_c('Button',{staticClass:\"but\",on:{\"click\":_vm.handleSee}},[_vm._v(\"设为已读\")]),_c('Table',{ref:\"selection\",attrs:{\"columns\":_vm.columnNotSeen,\"data\":_vm.notices.notSeen,\"show-header\":false},on:{\"on-selection-change\":_vm.changeSelection}})],1)],1)],1),_c('TabPane',{attrs:{\"label\":\"已读通知\"}},[_c('Row',{staticClass:\"code-row-bg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('Col',{attrs:{\"span\":\"23\"}},[_c('Table',{attrs:{\"columns\":_vm.columnSeen,\"data\":_vm.notices.seen,\"show-header\":false}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-dbc5fc12\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/user/notice.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-dbc5fc12\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./notice.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./notice.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./notice.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-dbc5fc12\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./notice.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-dbc5fc12\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user/notice.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}